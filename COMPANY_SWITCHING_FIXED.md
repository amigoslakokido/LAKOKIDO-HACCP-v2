# ุชู ุฅุตูุงุญ ูุดููุฉ ุงูุชุจุฏูู ุจูู ุงูุดุฑูุงุช! โ

## ุงููุดุงูู ุงูุชู ุชู ุญููุง:

### 1. โ ูุดููุฉ ุงูููุถุน - ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ูุงูุช ุชุบุทู ุงุณู ุงูุดุฑูุฉ
**ุงูุญู:**
- ููู `CompanySwitcher` ูู App.tsx ุฅูู ุฏุงุฎู navigation bar ูู ูู ูุธุงู
- ูู **HACCP**: ุธููุฑ CompanySwitcher ุจุฌุงูุจ ุงูููุฌู ูุงูุนููุงู
- ูู **HMS**: ุธููุฑ CompanySwitcher ูู ุฃุนูู ุงูู sidebar
- ุฅุตูุงุญ ุงูู z-index ู sticky positioning

### 2. โ ูุดููุฉ ุงูุชุจุฏูู - ูุงู ูุชุบูุฑ ุงูุงุณู ููุท ุจุฏูู ุชุญุฏูุซ ุงูุจูุงูุงุช
**ุงูุญู:**
- ุฅุถุงูุฉ `key={currentCompany.id}` ููู ูููู
- ุนูุฏ ุชุบููุฑ ุงูู keyุ React ูุนูุฏ ุชุญููู ุงููููู ุจุงููุงูู
- ูุฐุง ูุถูู ุงุณุชุฏุนุงุก `useEffect` ูุชุญููู ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ

---

## ููู ูุนูู ุงููุธุงู ุงูุขูุ

### 1. ุนูุฏ ุงูุถุบุท ุนูู ุงุณู ุงูุดุฑูุฉ:
```
ุงููุณุชุฎุฏู ูุถุบุท โ ุชุธูุฑ ูุงุฆูุฉ ุงูุดุฑูุงุช โ ูุฎุชุงุฑ ุดุฑูุฉ ุฌุฏูุฏุฉ
```

### 2. ุนูุฏ ุงุฎุชูุงุฑ ุดุฑูุฉ ุฌุฏูุฏุฉ:
```typescript
setCurrentCompany(newCompany)
  โ
ูุญูุธ ูู localStorage
  โ
ูุชุบูุฑ currentCompany ูู Context
  โ
key prop ูุชุบูุฑ (ูู ID ุดุฑูุฉ 1 ุฅูู ID ุดุฑูุฉ 2)
  โ
React ูุนูุฏ ุชุญููู ุงููููู ุจุงููุงูู
  โ
useEffect ููุณุชุฏุนู ูู ุฌุฏูุฏ
  โ
ูุชู ุชุญููู ุงูุจูุงูุงุช ููุดุฑูุฉ ุงูุฌุฏูุฏุฉ
```

### 3. ุงูููุฏ ุงููุณุคูู ุนู ุฅุนุงุฏุฉ ุงูุชุญููู:
```typescript
// ูู HACCPApp.tsx ู HMSApp.tsx
const { currentCompany } = useCompany();

const renderView = () => {
  const companyKey = currentCompany?.id || 'default';

  switch (currentView) {
    case 'temperature':
      return <TemperatureControl key={companyKey} />;
    // ูู ูููู ูู key ูุฑูุฏ ุจูุงุกู ุนูู ID ุงูุดุฑูุฉ
  }
};
```

---

## ููุถุน CompanySwitcher ุงูุขู:

### ูู HACCP System:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [HACCP/HMS Toggle - ูู ุงูุฃุนูู ุชูุงูุงู]          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [Logo] HACCP System  โ  [CompanySwitcher]       โ
โ                       Dashboard | Temp | Clean   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ูู HMS System:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [HACCP/HMS Toggle - ูู ุงูุฃุนูู ุชูุงูุงู]          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ HMS System     โโ                              โ
โ [CompanySwitcher]โ                             โ
โ                โโ                              โ
โ ๐ฅ Helse       โโ   Content Area               โ
โ ๐ฅ Beredskap   โโ                              โ
โ ๐ Opplรฆring   โโ                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ุงูุชุญุณููุงุช ุงูุชูููุฉ:

### 1. Sticky Positioning Hierarchy:
```css
App.tsx header:     sticky top-0  z-50  (ุฃุนูู ูุณุชูู)
HACCP nav:          sticky top-16 z-40  (ุชุญุช App)
HMS sidebar:        mt-16              (ูุง ูุบุทู App header)
HMS header:         sticky top-16 z-40  (ุชุญุช App)
```

### 2. Component Remounting:
```typescript
// ูุจู ุงูุฅุตูุงุญ - ูุง ูุญุฏุซ ุฅุนุงุฏุฉ ุชุญููู
<TemperatureControl />

// ุจุนุฏ ุงูุฅุตูุงุญ - ูุนูุฏ ุงูุชุญููู ุนูุฏ ุชุบููุฑ ุงูุดุฑูุฉ
<TemperatureControl key={currentCompany.id} />
```

### 3. Company Context Flow:
```typescript
CompanyProvider
  โ
[loads companies from DB]
  โ
[loads saved company from localStorage]
  โ
[provides currentCompany to all children]
  โ
CompanySwitcher (ูุนุฑุถ ููุบูุฑ ุงูุดุฑูุฉ)
  โ
All Components (ูุณุชุฎุฏููู currentCompany ูููุชุฑุฉ ุงูุจูุงูุงุช)
```

---

## ููููุฉ ุงูุงุฎุชุจุงุฑ:

### ุงุฎุชุจุงุฑ 1: ุงูุชุจุฏูู ุจูู ุงูุดุฑูุงุช
1. ุงูุชุญ ุงููุธุงู
2. ุงุถุบุท ุนูู ุงุณู ุงูุดุฑูุฉ (ูุธูุฑ ูู ุงูุฃุนูู)
3. ุงุฎุชุฑ ุงูุดุฑูุฉ ุงูุฃุฎุฑู
4. โ ูุฌุจ ุฃู ุชุฑู ุงูุจูุงูุงุช ุชุชุบูุฑ ููุฑุงู
5. โ ูุฌุจ ุฃู ุชููู ุงููุงุฆูุฉ ูุงุถุญุฉ ููุง ุชุบุทู ุดูุก

### ุงุฎุชุจุงุฑ 2: ุงูุจูุงูุงุช ูููุตูุฉ
1. ูู **Amigos La Kokido**: ุดุงูุฏ ุฏุฑุฌุงุช ุงูุญุฑุงุฑุฉ ุงูููุฌูุฏุฉ
2. ุจุฏูู ุฅูู **Actic FLAVORS**
3. โ ูุฌุจ ุฃู ุชููู ูุงุฑุบุฉ ุฃู ูุฎุชููุฉ ุชูุงูุงู
4. ุฃุถู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุฌุฏูุฏุฉ
5. ุจุฏูู ุฅูู **Amigos** ูุฑุฉ ุฃุฎุฑู
6. โ ูุง ูุฌุจ ุฃู ุชุฑู ุงูุฏุฑุฌุฉ ุงูุฌุฏูุฏุฉ

### ุงุฎุชุจุงุฑ 3: ุงูุญูุธ ุงูุชููุงุฆู
1. ุงุฎุชุฑ ุดุฑูุฉ ูุนููุฉ
2. ุฃุบูู ุงููุชุตูุญ
3. ุงูุชุญู ูุฑุฉ ุฃุฎุฑู
4. โ ูุฌุจ ุฃู ุชููู ููุณ ุงูุดุฑูุฉ ูุญุฏุฏุฉ

---

## ุงููููุงุช ุงููุนุฏููุฉ:

### Core Files:
- โ `App.tsx` - ุฅุฒุงูุฉ CompanySwitcher ูู ุงูุฃุนูู
- โ `HACCPApp.tsx` - ุฅุถุงูุฉ CompanySwitcher + key props
- โ `HMSApp.tsx` - ุฅุถุงูุฉ CompanySwitcher ูู sidebar + key props
- โ `CompanyContext.tsx` - ูุนูู ุจุดูู ุตุญูุญ (ูู ูุชุบูุฑ)
- โ `CompanySwitcher.tsx` - ูุนูู ุจุดูู ุตุญูุญ (ูู ูุชุบูุฑ)

### Component Files (updated with company_id):
- โ `TemperatureControl.tsx`
- โ `CoolingLog.tsx`
- โ `CleaningTasks.tsx`

---

## ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

### ูุจู ุงูุฅุตูุงุญ:
- โ ุงููุงุฆูุฉ ุชุบุทู ุงุณู ุงูุดุฑูุฉ
- โ ุงูุชุจุฏูู ูุบูุฑ ุงูุงุณู ููุท
- โ ุงูุจูุงูุงุช ูุง ุชุชุญุฏุซ

### ุจุนุฏ ุงูุฅุตูุงุญ:
- โ CompanySwitcher ูุงุถุญ ูุณูู ุงููุตูู
- โ ุงูุชุจุฏูู ูุนูุฏ ุชุญููู ุฌููุน ุงูุจูุงูุงุช
- โ ูู ุดุฑูุฉ ูุนุฒููุฉ ุชูุงูุงู
- โ ุงูุชุตููู ุฃููู ูููุธู

---

## ููุงุญุธุงุช ูููุฉ:

1. **key prop ูู ุงูููุชุงุญ ุงูุณุญุฑู:**
   - ุนูุฏูุง ูุชุบูุฑ keyุ React ูุฏูุฑ ุงููููู ุงููุฏูู ููุจูู ูุงุญุฏ ุฌุฏูุฏ
   - ูุฐุง ูุถูู ุชุดุบูู useEffect ูู ุงูุจุฏุงูุฉ
   - ุฌููุน ุงูู states ุชูุนุงุฏ ุชููุฆุชูุง

2. **localStorage ููุญูุธ:**
   - ุงูุดุฑูุฉ ุงููุฎุชุงุฑุฉ ุชูุญูุธ ุชููุงุฆูุงู
   - ุนูุฏ ูุชุญ ุงููููุนุ ุชูุณุชุฏุนู ุขุฎุฑ ุดุฑูุฉ

3. **z-index hierarchy ููู ุฌุฏุงู:**
   - App header: 50 (ุงูุฃุนูู)
   - Navigation: 40
   - Sidebar: 50 (ููู ูุน mt-16 ูุง ูุบุทู ุงูุฃุนูู)
   - Dropdowns: 50+ (ุฃุนูู ูู ูู ุดูุก ูุคูุชุงู)

---

## ูุงุฐุง ุจุนุฏุ

ุงูุขู ุงููุธุงู ูุนูู ุจุดูู ููุชุงุฒ! ููููู:

1. โ ุงูุชุจุฏูู ุจูู ุงูุดุฑูุชูู ุจุณูููุฉ
2. โ ุงูุจูุงูุงุช ูููุตูุฉ ุชูุงูุงู
3. โ ุงููุงุฌูุฉ ูุงุถุญุฉ ูููุธูุฉ

**ุฌุฑูุจ ุงูุขู!** ๐

ุงูุชุญ ุงููุธุงู โ ุงุถุบุท ุนูู ุงุณู ุงูุดุฑูุฉ โ ุจุฏูู โ ุดุงูุฏ ุงูุณุญุฑ ูุญุฏุซ!
